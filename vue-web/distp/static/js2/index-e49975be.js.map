{"version":3,"file":"index-e49975be.js","sources":["../../../vite/modulepreload-polyfill","../../../vite/preload-helper","../../../plugin-vue:export-helper","../../../src/views/menus.vue","../../../src/App.vue","../../../src/storage/service-meta.js","../../../src/store/index.js","../../../src/icon/index.js","../../../src/storage/index.js","../../../src/main.js"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","const scriptRel = 'modulepreload';const seen = {};const base = '/four-quadrant/';export const __vitePreload = function preload(baseModule, deps) {\n    // @ts-ignore\n    if (!__VITE_IS_MODERN__ || !deps || deps.length === 0) {\n        return baseModule();\n    }\n    return Promise.all(deps.map((dep) => {\n        // @ts-ignore\n        dep = `${base}${dep}`;\n        // @ts-ignore\n        if (dep in seen)\n            return;\n        // @ts-ignore\n        seen[dep] = true;\n        const isCss = dep.endsWith('.css');\n        const cssSelector = isCss ? '[rel=\"stylesheet\"]' : '';\n        // @ts-ignore check if the file is already preloaded by SSR markup\n        if (document.querySelector(`link[href=\"${dep}\"]${cssSelector}`)) {\n            return;\n        }\n        // @ts-ignore\n        const link = document.createElement('link');\n        // @ts-ignore\n        link.rel = isCss ? 'stylesheet' : scriptRel;\n        if (!isCss) {\n            link.as = 'script';\n            link.crossOrigin = '';\n        }\n        link.href = dep;\n        // @ts-ignore\n        document.head.appendChild(link);\n        if (isCss) {\n            return new Promise((res, rej) => {\n                link.addEventListener('load', res);\n                link.addEventListener('error', () => rej(new Error(`Unable to preload CSS for ${dep}`)));\n            });\n        }\n    })).then(() => baseModule());\n}","\nexport default (sfc, props) => {\n  const target = sfc.__vccOpts || sfc;\n  for (const [key, val] of props) {\n    target[key] = val;\n  }\n  return target;\n}\n","<template>\r\n  <div\r\n    style=\"position:fixed;width: 220px;left: 10px;top:100px; border:0px solid #123123;z-index: 100;\"\r\n  >\r\n    <el-menu\r\n      ref=\"domMenu\"\r\n      class=\"el-menu-vertical-demo\"\r\n      default-active=\"1\"\r\n      v-bind=\"$attrs\"\r\n      :background-color=\"backgroundColor\"\r\n      @select=\"select\"\r\n      @open=\"open\"\r\n      @close=\"close\"\r\n    >\r\n      <!--递归调用，支持n级菜单 myMenu-->\r\n      <mySubMenu :subMenu=\"menus\"/>\r\n    </el-menu>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  // 模块菜单\r\n  import { reactive, ref, watch } from 'vue'\r\n  import { ElMenu } from 'element-plus'\r\n  // 状态\r\n  // import { store } from '@naturefw/nf-state'\r\n  // 展示子菜单\r\n  import mySubMenu from './menus-sub.vue'\r\n\r\n  import _menus from './json/menus.json'\r\n\r\n</script>\r\n\r\n<script setup>\r\n  const props = defineProps({\r\n    'background-color': {\r\n      tyoe: String,\r\n      default: '#ece5d9'\r\n    }\r\n  })\r\n\r\n  // 当前菜单、文档内容，菜单列表\r\n  // const { current, menuList } = store\r\n\r\n  // 自动展开菜单用\r\n  const domMenu = ref(null)\r\n\r\n  const menus = _menus\r\n\r\n  /**\r\n   * 二级菜单被选中\r\n   * @param {*} index\r\n   * @param {*} indexPath\r\n   */\r\n  const select = (index, indexPath) => {\r\n\r\n  }\r\n\r\n</script>\r\n\r\n<style>\r\n  .el-menu-vertical-demo:not(.el-menu--collapse) {\r\n    max-width: 320px;\r\n    min-height: 400px;\r\n  }\r\n</style>\r\n","<template>\n  <el-container>\n    <el-header>\n      <!--导航-->\n      <div style=\"float: left;\">\n        <!--写网站logo、标题等-->\n        <h1>四象限——人生日志管理系统1</h1>\n      </div>\n      <div style=\"float: right;min-width: 100px;height: 40px;padding-top: 3px;\">\n        <!--写网站logo、标题等-->\n      </div>\n      <div style=\"float: right;min-width: 600px;height: 60px;\">\n        <!--网站导航-->\n      </div>\n    </el-header>\n    <el-container>\n      <!--左侧边栏-->\n      <el-aside width=\"230px\">\n        <!--菜单-->\n        <menus></menus>\n      </el-aside>\n      <el-main>\n        <!--编辑区域-->\n        <component\n          :is=\"delay[delayKind]\"\n        >\n        </component>\n      </el-main>\n    </el-container>\n  </el-container>\n</template>\n\n<script>\n  import { defineAsyncComponent, watch, ref } from 'vue'\n  import { ElContainer, ElHeader, ElAside, ElMain, ElSwitch } from 'element-plus'\n  // 访问状态\n  import { store } from '@naturefw/nf-state'\n  // 左侧菜单导航\n  import menus from './views/menus.vue'\n\n  export default {\n    components: {\n      menus,\n      ElContainer,\n      ElHeader,\n      ElAside,\n      ElMain,\n      ElSwitch\n    },\n    setup () {\n      // 延迟加载\n      const delay = {\n        load: '',\n        list: defineAsyncComponent(() => import('./views/base/data-list.vue'))\n      }\n\n      const delayKind = ref('')\n\n      const { web } = store\n\n      watch(() => store.web.load, (load) => {\n        if (load === 'end') {\n          delayKind.value = 'list'\n        }\n      })\n\n      return {\n        delay,\n        delayKind\n      }\n    }\n  }\n</script>\n\n<style>\nbody {\n  background-color:#ece5d9;\n}\n  .el-header {\n    background-color: #ece5d9;\n    color: var(--el-text-color-primary);\n    text-align: left;\n    height: 80px;\n    line-height: 30px;\n    border: 1px solid #ccc!important;padding:14px;border-radius: 16px!important;\n  }\n\n  .el-aside {\n    background-color: #ece5d9;\n    color: var(--el-text-color-primary);\n    text-align: left;\n    line-height: 30px;\n    min-height: 500px;\n    border:1px solid rgba(159, 196, 238, 0.315);\n  }\n\n  .el-main {\n    background-color: #ece5d9;\n    color: var(--el-text-color-primary);\n    text-align: left;\n    line-height: 18px;\n  }\n\n  body > .el-container {\n    margin-bottom: 10px;\n  }\n\n#app {\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  text-align: left;\n  color: #2c3e50;\n  margin-top: 5px;\n}\n</style>\n","\r\n// 访问状态\r\nimport { store } from '@naturefw/nf-state'\r\n\r\n/**\r\n * 从 json 加载meta\r\n */\r\n\r\nlet baseUrl = ''\r\n\r\nconst urls = {\r\n  button: (key) => `${baseUrl}json/${key}_button.json`,\r\n  pager: (key) => `${baseUrl}json/${key}_pager.json`,\r\n  grid: (key) => `${baseUrl}json/${key}_grid.json`,\r\n  form: (key) => `${baseUrl}json/${key}_form.json`,\r\n  find: (key) => `${baseUrl}json/${key}_find.json`\r\n}\r\n\r\nconst loadMeta = async (key) => {\r\n  baseUrl = store.web.baseUrl\r\n\r\n  const meta = {\r\n    moduleId: key,\r\n    gridMeta: (await axios.get(urls.grid(key))).data,\r\n    // pager: await await axios.get(urls.pager(key)),\r\n    formMeta: (await axios.get(urls.form(key))).data,\r\n    findMeta: (await axios.get(urls.find(key))).data,\r\n    buttonMeta: (await axios.get(urls.button(key))).data\r\n  }\r\n\r\n  store.meta[key] = meta\r\n  return meta\r\n}\r\n\r\nexport {\r\n  loadMeta\r\n}\r\n","// 加载状态的类库\r\nimport { createStore } from '@naturefw/nf-state'\r\n\r\nimport { loadMeta } from '../storage/service-meta.js'\r\n\r\nconst _baseUrl = (document.location.host.includes('.gitee.io')) ? '/four-quadrant/' : '/'\r\n\r\n/**\r\n * 统一注册全局状态\r\n */\r\nexport default createStore({\r\n  // 读写状态，直接使用 reactive\r\n  store: {\r\n    // 纯 state\r\n    web: {\r\n      state: () => {\r\n        return {\r\n          ver: 1.0,\r\n          baseUrl: _baseUrl,\r\n          load: 'start',\r\n          dbHelp: null, // indexedDB 的help\r\n          name: 'jyk' //\r\n        }\r\n      }\r\n    },\r\n    // 项目运行需要的 meta 信息\r\n    meta: {\r\n      0: {\r\n        moduleId: 0,\r\n        grid: {},\r\n        pager: {},\r\n        form: {},\r\n        find: {},\r\n        button: {}\r\n      }\r\n    },\r\n    // 有 getters、actions\r\n    log_list: {\r\n      state: [],\r\n      getters: {\r\n      },\r\n      actions: {\r\n        async loadData (val, state) {\r\n          const foo = await testPromie()\r\n          state.name = foo\r\n          this.name = foo\r\n        }\r\n      },\r\n      options: {\r\n        isLocal: false, // true：局部状态；false：全局状态（默认属性）；\r\n        isLog: true, // true：做记录；false：不用做记录（默认属性）；\r\n        /**\r\n         * 1：宽松，可以各种改变属性，适合弹窗、抽屉、多tab切换等。\r\n         * 2：一般，不能通过属性直接改状态，只能通过内置函数、action 改变状态\r\n         * 3：严格，不能通过属性、内置函数改状态，只能通过 action 改变状态\r\n         * 4：超严，只能在指定组件内改变状态，比如当前用户的状态，只能在登录组件改，其他组件完全只读\r\n        */\r\n        level: 1\r\n      }\r\n    }\r\n  },\r\n\r\n  // 可以给全局状态设置初始状态，同步数据可以直接在上面设置，如果是异步数据，可以在这里设置。\r\n  async init (store) {\r\n    await loadMeta('m_log')\r\n    store.web.load = 'end'\r\n  }\r\n})\r\n","import { reactive } from 'vue'\r\n\r\nimport {\r\n  CloseBold,\r\n  Close,\r\n  Plus,\r\n  Star,\r\n  UserFilled,\r\n  Loading,\r\n  Connection,\r\n  Edit,\r\n  FolderOpened\r\n} from '@element-plus/icons-vue'\r\n\r\nconst dictIcon = reactive({\r\n  CloseBold: CloseBold,\r\n  Close: Close,\r\n  Plus: Plus,\r\n  Star: Star,\r\n  UserFilled: UserFilled,\r\n  Loading: Loading,\r\n  Connection: Connection,\r\n  Edit: Edit,\r\n  FolderOpened: FolderOpened\r\n})\r\n\r\nconst installIcon = (app) => {\r\n  // 便于模板获取\r\n  app.config.globalProperties.$icon = dictIcon\r\n}\r\n\r\nexport default installIcon\r\n","\r\n// 创建help\r\nimport { dbCreateHelp } from '@naturefw/storage'\r\n\r\n// 访问状态\r\nimport { store } from '@naturefw/nf-state'\r\n\r\n// 设置数据库名称和版本\r\nconst db = {\r\n  dbName: 'nf-four-quadrant-cus',\r\n  ver: 1\r\n}\r\n\r\n/**\r\n * 客户项目的 meta 的 db 缓存\r\n */\r\nexport default async function createDBHelp (callback) {\r\n  // 设置基础路径\r\n  // config.baseUrl = url\r\n\r\n  const help = dbCreateHelp({\r\n    // dbFlag: 'project-meta-db',\r\n    dbConfig: db,\r\n    stores: { // 数据库里的对象仓库\r\n      db_fq_log: { // 可以存放多个项目的文档，包含导航信息和项目信息\r\n        id: 'id',\r\n        index: {},\r\n        isClear: false\r\n        /**\r\n         */\r\n      }\r\n    },\r\n    // 设置初始数据\r\n    async init (help) {\r\n      const { web } = store\r\n      // 把 help 存入状态\r\n      web.dbHelp = help\r\n    }\r\n  })\r\n  return help\r\n}\r\n","import { createApp } from 'vue'\nimport App from './App.vue'\n\n// 状态\nimport store from './store'\n\n// 设置icon\nimport installIcon from './icon/index.js'\n\n// UI库\nimport ElementPlus from 'element-plus'\n// import 'element-plus/lib/theme-chalk/index.css'\n// import 'dayjs/locale/zh-cn'\nimport zhCn from 'element-plus/es/locale/lang/zh-cn'\n\n// 二次封装\nimport { nfElementPlus, dialogDrag } from '@naturefw/ui-elp'\n\n// 数据库\nimport db from './storage'\n\ndb()\n\ncreateApp(App)\n  .use(store)\n  .use(installIcon) // 注册全局图标\n  .use(ElementPlus, { locale: zhCn, size: 'small' }) // UI库\n  .use(nfElementPlus) // 二次封装的组件\n  .mount('#app')\n"],"names":["store","_createElementVNode","_createCommentVNode","_createBlock","_createVNode","_resolveDynamicComponent","CloseBold","Close","Plus","Star","UserFilled","Loading","Connection","Edit","FolderOpened","db","ElementPlus"],"mappings":"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"}